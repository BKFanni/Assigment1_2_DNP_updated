@using Blazor.Services

@inject NavigationManager Navigation
@inject IAuthService authService

<label for="loginUsername">@error</label>
<div class="space"></div>
<input type="text" id="loginUsername" name="password" @bind="Username" @oninput="@((e) => { Username = (string)e.Value; })" required><br>
<div class="space"></div>
<input type="password" id="loginPassword" name="password" @bind="Password" @oninput="@((e) => { Password = (string)e.Value; })" required><br>
<div class="space"></div>
<button id="login"  @onclick="TryLogin" class="loginBtn" IsToggle="false">Login</button>
<div class="space"></div>
<button id="register" @onclick="RedirectRegister" class="loginBtn" IsToggle="false">Sign Up</button>

@code{

    private string error = "";

    private string Username { get; set; } = "";
    private string Password { get; set; } = "";
    

    private void RedirectRegister()
    {
        Navigation.NavigateTo($"/CreateUser");
    }

    private async void TryLogin()
    {
        try
        {
            await authService.LoginAsync(Username, Password);
            
        }
        catch (Exception e)
        {
            Console.WriteLine(e);
        }
    }
    
}